<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>3D Race Game with Points</title>
<style>
  body { margin:0; overflow:hidden; background:#87ceeb; }
  canvas { display:block; }
  #score { position:absolute; top:10px; left:10px; color:white; font-size:24px; font-family:sans-serif; }
</style>
</head>
<body>
<div id="score">Score: 0</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r150/three.min.js"></script>
<script>
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x87ceeb);

// Camera
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

// Renderer
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// Licht
const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(10,20,10);
scene.add(light);
scene.add(new THREE.AmbientLight(0x404040));

// Racebaan (rechthoekig circuit)
const roadMaterial = new THREE.MeshPhongMaterial({color:0x333333});
const road = new THREE.Group();

// Voorwaartse baan
const road1 = new THREE.Mesh(new THREE.BoxGeometry(4,0.1,40), roadMaterial);
road1.position.set(0,0,0);
road.add(road1);

// Linker bocht
const road2 = new THREE.Mesh(new THREE.BoxGeometry(40,0.1,4), roadMaterial);
road2.position.set(-18,0,-18);
road.add(road2);

// Achterste baan
const road3 = new THREE.Mesh(new THREE.BoxGeometry(4,0.1,40), roadMaterial);
road3.position.set(-36,0,-36);
road.add(road3);

// Rechter bocht
const road4 = new THREE.Mesh(new THREE.BoxGeometry(40,0.1,4), roadMaterial);
road4.position.set(2,0,-18);
road.add(road4);

scene.add(road);

// Gras rondom
const grass = new THREE.Mesh(
  new THREE.PlaneGeometry(100,100),
  new THREE.MeshPhongMaterial({color:0x228B22})
);
grass.rotation.x = -Math.PI/2;
scene.add(grass);

// Auto
const car = new THREE.Mesh(
  new THREE.BoxGeometry(1,1,2),
  new THREE.MeshPhongMaterial({color:0xff0000})
);
car.position.set(0,0.5,10);
scene.add(car);

// Punten (gele bolletjes)
const points = [];
const pointGeometry = new THREE.SphereGeometry(0.3,16,16);
const pointMaterial = new THREE.MeshPhongMaterial({color:0xffff00});

// Plaats 10 punten op de baan
for(let i=0;i<10;i++){
  const p = new THREE.Mesh(pointGeometry, pointMaterial);
  p.position.set((Math.random()-0.5)*30,0.3,(Math.random()-0.5)*30);
  scene.add(p);
  points.push(p);
}

// Besturing
const move = {forward:false, backward:false, left:false, right:false};
document.addEventListener('keydown', e=>{
  if(e.code==='KeyW') move.forward=true;
  if(e.code==='KeyS') move.backward=true;
  if(e.code==='KeyA') move.left=true;
  if(e.code==='KeyD') move.right=true;
});
document.addEventListener('keyup', e=>{
  if(e.code==='KeyW') move.forward=false;
  if(e.code==='KeyS') move.backward=false;
  if(e.code==='KeyA') move.left=false;
  if(e.code==='KeyD') move.right=false;
});

// Score
let score = 0;

// Animate loop
function animate(){
  requestAnimationFrame(animate);

  // Beweging auto
  const speed = 0.2;
  if(move.forward) car.position.z -= speed;
  if(move.backward) car.position.z += speed;
  if(move.left) car.position.x -= speed;
  if(move.right) car.position.x += speed;

  // Camera volgt auto
  camera.position.set(car.position.x, car.position.y+5, car.position.z+10);
  camera.lookAt(car.position);

  // Punten checken
  points.forEach((p,i)=>{
    if(car.position.distanceTo(p.position)<1){
      scene.remove(p);
      points.splice(i,1);
      score++;
      document.getElementById('score').innerText = 'Score: '+score;
    }
  });

  renderer.render(scene,camera);
}

animate();

window.addEventListener('resize', ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
